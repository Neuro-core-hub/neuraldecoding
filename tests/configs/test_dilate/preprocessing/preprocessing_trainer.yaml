order: [dict, xfilt, yfilt, feat, split, xnorm, ynorm, trainhist, testhist, tensor, dataset]
content:
  dict:
    type: Dataset2DictBlock
    params:
      neural_nwb_loc: "processing.ecephys.EMG"
      behavior_nwb_loc: "processing.behavior.finger_angles"
      nwb_trial_start_times_loc: "trials.start_time"
      nwb_trial_end_times_loc: "trials.stop_time"
      nwb_targets_loc: "trials.TargetPos"
  xfilt:
    type: IndexSelectorBlock
    params:
      locations: neural
      indices: [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]
  yfilt:
    type: IndexSelectorBlock
    params:
      locations: behavior
      indices: [1,3]
  feat: 
    type: FeatureExtractionBlock
    params:
      location_data: ["neural","behavior"]
      location_ts: ["neural_ts","behavior_ts"]
      feature_extractor_config:
        channels: 16
        feature_type: [["mav"],["mean", "vel"]]
        feature_params: [{}, {}]
        bin_size_ms: 32
  split:
    type: DataSplitBlock
    params:
      split_ratio: 0.8
      split_seed: 42
  xnorm:
    type: NormalizationBlock
    params:
      fit_location: neural_train
      apply_locations: neural_test
      normalizer_method: sklearn
      sklearn_type: StandardScaler # None if normalizer_method is not 'sklearn'
      normalizer_params: {}
  ynorm:
    type: NormalizationBlock
    params:
      fit_location: behavior_train
      apply_locations: behavior_test
      normalizer_method: sklearn
      sklearn_type: StandardScaler # None if normalizer_method is not 'sklearn'
      normalizer_params: {}
  trainhist:
    type: TrialHistoryBlock
    params:
      leadup: 20
  testhist:
    type: AddHistoryBlock
    params:
      location: neural_test
      seq_length: 20
  tensor:
    type: EnforceTensorBlock
    params:
      device: cuda
      dtype: float32
  dataset:
    type: Dict2BehaviorDatasetBlock
    params: 
      otherdatakeys_list: ['trial_lengths_train', null]

model_conf_append:
  - content.trainhist.params.leadup